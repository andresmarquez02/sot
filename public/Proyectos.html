<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="tailwind.css">
    <link rel="stylesheet" href="../public/js/alertifyjs/css/alertify.css">
    <link href="material-design-iconic-font/css/materialdesignicons.min.css" rel="stylesheet">
    <link rel="shortcut icon" href="favicon.svg" type="image/x-icon">
    <title>SOT | Proyecto</title>
</head>

<body>
    <div x-data="data()" x-init="init();">
        <div class="flex loading" id="loading">
            <div>
                <svg class="w-10 h-10 mr-3 -ml-1 text-indigo-600 animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
            </div>
        </div>
        <aside class="bar-left" x-bind:class="aside">
            <div class="brand-title">
                <a href="index.html">
                    <img src="favicon.svg" class="inline w-8 h-8" alt="" srcset=""> SOT
                </a>
            </div>
            <div class="px-2 py-4 overflow-y-auto">
                <div class="flex justify-end lg:hidden">
                    <span x-on:click="aside_bar"><i class="mdi" x-bind:class="bar"></i></span>
                </div>
                <a href="Proyectos.html" class="mt-4 list-item">
                    <i class="mdi mdi-shape-plus"></i> Proyectos
                </a>
                <a href="Tareas.html" class="list-item">
                    <i class="mdi mdi-puzzle"></i> Tareas
                </a>
            </div>
            <div class="item-footer">
                <div class="mb-2">
                    <a href="https://andresmarquez02.github.io/andres/" class="block px-3 py-2 bttn bttn-secondary">
                        <i class="mdi mdi-account-circle"></i> Portafolio
                    </a>
                </div>
                <div>
                    <a href="https://github.com/andresmarquez02" target="_blank" rel="noopener noreferrer" class="block px-3 py-2 bttn bttn-dark">
                        <i class="mdi mdi-github-circle"></i> Github
                    </a>
                </div>
                <div class="block mt-5 lg:hidden">
                    <i class="ml-2 text-xl mdi" x-bind:class="internet"></i>
                    <a href="https://andresmarquez02.github.io/andres/" target="_blank" rel="noopener noreferrer">
                        <i class="ml-2 text-xl mdi mdi-account"></i>
                    </a>
                    <a href="https://t.me/andresmarquez02" target="_blank" rel="noopener noreferrer">
                        <i class="ml-2 text-xl mdi mdi-telegram"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send/?phone=%2B584129298833&text&app_absent=0" rel="noopener noreferrer">
                        <i class="ml-2 text-xl mdi mdi-whatsapp"></i>
                    </a>
                </div>
            </div>
        </aside>
        <div class="container-body">
            <div class="top-bar">
                <div class="relative pl-5 mt-5 transition-all duration-500 ease-in-out" x-bind:style="title_bar">
                    <a href="index.html" class="flex mb-3 text-xl font-extrabold lg:hidden">
                        <img src="favicon.svg" class="inline w-8 h-8" alt="" srcset=""> SOT
                    </a>
                </div>
                <div>
                    <div class="hidden mt-5 mb-3 lg:block">
                        <i class="ml-2 text-xl mdi" x-bind:class="internet"></i>
                        <a href="https://andresmarquez02.github.io/andres/" target="_blank" rel="noopener noreferrer">
                            <i class="ml-2 text-xl mdi mdi-account"></i>
                        </a>
                        <a href="https://t.me/andresmarquez02" target="_blank" rel="noopener noreferrer">
                            <i class="ml-2 text-xl mdi mdi-telegram"></i>
                        </a>
                        <a href="https://api.whatsapp.com/send/?phone=%2B584129298833&text&app_absent=0" rel="noopener noreferrer">
                            <i class="ml-2 text-xl mdi mdi-whatsapp"></i>
                        </a>
                    </div>
                    <div class="block pl-5 mt-5 lg:hidden">
                        <span x-on:click="aside_bar" class="flex lg:hidden"><i class="mdi" x-bind:class="bar"></i></span>
                    </div>
                </div>
            </div>
            <div style="min-height: calc(100vh - 8.5rem);" class="pb-4">
                <div class="p-4 mt-4" x-data="proyectos()" x-init="init()">
                    <div class="section">
                        <div class="flex justify-end">
                            <a href="Crear_proyecto.html" class="bttn bttn-secondary">
                                <i class="mdi mdi-plus-circle-outline"></i> Crear Proyecto
                            </a>
                        </div>
                        <div class="mt-7">
                            <template x-if="msgNotProjects == false">
                                <div class="relative overflow-x-auto sm:rounded-lg">
                                    <table class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                        <thead class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                            <tr>
                                                <th scope="col" class="px-6 py-3">
                                                    Proyecto
                                                </th>
                                                <th scope="col" class="px-6 py-3">
                                                    <span class="sr-only">Opciones</span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <template x-if="projectsLoading == true">
                                                <tr>
                                                    <td class="px-6 py-4 whitespace-nowrap animate-pulse">
                                                        <div class="w-5/6 h-4 bg-indigo-500 rounded"></div>
                                                    </td>
                                                    <td class="px-6 py-4 text-sm font-medium text-right whitespace-nowrap animate-pulse">
                                                        <span class="h-4 text-indigo-500 bg-indigo-500 rounded">Editar</span>
                                                        <span class="h-4 text-indigo-500 bg-indigo-500 rounded">Eliminar</span>
                                                    </td>
                                                </tr>
                                            </template>
                                            <template x-if="projectsLoading == true">
                                                <tr>
                                                    <td class="px-6 py-4 whitespace-nowrap animate-pulse">
                                                        <div class="w-5/6 h-4 bg-indigo-500 rounded"></div>
                                                    </td>
                                                    <td class="px-6 py-4 text-sm font-medium text-right whitespace-nowrap animate-pulse">
                                                        <span class="h-4 text-indigo-500 bg-indigo-500 rounded">Editar</span>
                                                        <span class="h-4 text-indigo-500 bg-indigo-500 rounded">Eliminar</span>
                                                    </td>
                                                </tr>
                                            </template>
                                            <template x-if="projectsLoading == true">
                                                <tr>
                                                    <td class="px-6 py-4 whitespace-nowrap animate-pulse">
                                                        <div class="w-5/6 h-4 bg-indigo-500 rounded"></div>
                                                    </td>
                                                    <td class="px-6 py-4 text-sm font-medium text-right whitespace-nowrap animate-pulse">
                                                        <span class="h-4 text-indigo-500 bg-indigo-500 rounded">Editar</span>
                                                        <span class="h-4 text-indigo-500 bg-indigo-500 rounded">Eliminar</span>
                                                    </td>
                                                </tr>
                                            </template>
                                            <template x-for="project of projects">
                                                <tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                                                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 dark:text-white whitespace-nowrap" x-html="project.project.project">
                                                        
                                                    </th>
                                                    <td class="px-6 py-4 text-right whitespace-nowrap">
                                                        <span x-on:click="edit(project.id)" class="edit">
                                                            <i class="mdi mdi-table-edit"></i>
                                                            Editar
                                                        </span>
                                                        <span class="del" x-on:click="del(project.id)">
                                                            <i class="mdi mdi-delete"></i>
                                                            Eliminar
                                                        </span>
                                                    </td>
                                                </tr>
                                            </template>
                                        </tbody>
                                    </table>
                                </div>
                            </template>
                            <template x-if="msgNotProjects == true">
                                <div class="text-3xl font-extrabold text-center">
                                    No hay proyectos creados
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
            <div class="p-4 text-gray-600 bg-white w-100">
                <i class="mdi mdi-copyright"></i> Andres Marquez <span x-html="date.getFullYear()"></span>
            </div>
        </div>
    </div>
    <script src="../public/js/alpine.js"></script>
    <script src="../public/js/core/main.js"></script>
    <script src="../public/js/core/db.js"></script>
    <script src="../public/js/alertifyjs/alertify.js"></script>
    <script>
        function proyectos() {
            return {
                projects: [],
                projectsLoading: true,
                msgNotProjects: false,
                init() {
                    window.addEventListener("load", () => {
                        this.projectsGet();
                    });
                },
                projectsGet() {
                    this.projectsLoading = true;
                    this.projects = [];
                    this.msgNotProjects = false;
                    setTimeout(() => {
                        window.Projects()
                    }, 1000);
                    setTimeout(() => {
                        this.projects = window.mis_proyectos;
                        this.projectsLoading = false;
                        if (this.projects.length == 0) {
                            this.msgNotProjects = true
                        }
                    }, 2000);
                },
                edit(id) {
                    localStorage.setItem("project", id);
                    window.location.href = "Editar_proyecto.html";
                },
                del(id) {
                    window.deleteProject(id);
                    this.projectsGet();
                }
            }
        }
    </script>
</body>

</html>